<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Lamaran Kerja</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-indigo-700 mb-2">Detail Lamaran Kerja</h1>
        </header>

        <div id="application-detail" class="bg-white rounded-lg shadow-md p-6">
            <!-- Detail content will be inserted here by JavaScript -->
        </div>

        <div class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Apply for this Position</h2>
            <form id="apply-form">
                <div class="mb-4">
                    <label for="name" class="block text-gray-700">Nama:</label>
                    <input type="text" id="name" class="mt-1 block w-full border border-gray-300 rounded-md p-2" required>
                </div>
                <div class="mb-4">
                    <label for="email" class="block text-gray-700">Email:</label>
                    <input type="email" id="email" class="mt-1 block w-full border border-gray-300 rounded-md p-2" required>
                </div>
                <div class="mb-4">
                    <label for="message" class="block text-gray-700">Pesan:</label>
                    <textarea id="message" rows="4" class="mt-1 block w-full border border-gray-300 rounded-md p-2" required></textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700">Unggah Dokumen:</label>
                    <div class="mt-1">
                        <label class="block text-gray-600">Resume/CV:</label>
                        <input type="file" name="documents" accept=".pdf,.doc,.docx" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                    </div>
                    <div class="mt-2">
                        <label class="block text-gray-600">Cover Letter:</label>
                        <input type="file" name="documents" accept=".pdf,.doc,.docx" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                    </div>
                    <div class="mt-2">
                        <label class="block text-gray-600">Portofolio (jika ada):</label>
                        <input type="file" name="documents" accept=".pdf,.doc,.docx" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
                    </div>
                </div>

                <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                    Kirim Lamaran
                </button>
            </form>
        </div>

        <div class="mt-4 text-center">
            <button id="back-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                Kembali
            </button>
        </div>
    </div>

    <script>
        // Get application ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const appId = urlParams.get('id');

        // Sample application data (same as in the main file)
        const applications = [
            {
                id: 1,
                position: "Frontend Developer",
                company: "PT Tech Solusi Indonesia",
                date: "15 Juni 2023",
                status: "pending",
                logo: "https://logo.clearbit.com/pttechsolusi.com",
                notes: "Menunggu konfirmasi wawancara"
            },
            {
                id: 2,
                position: "UI/UX Designer",
                company: "Digital Kreatif Studio",
                date: "10 Juni 2023",
                status: "review",
                logo: "https://logo.clearbit.com/digitalkreatif.com",
                notes: "Sedang dalam tahap review portofolio"
            },
            {
                id: 3,
                position: "Backend Engineer (Node.js)",
                company: "Cloud Sys Solutions",
                date: "5 Juni 2023",
                status: "accepted",
                logo: "https://logo.clearbit.com/cloudsys.com",
                notes: "Diterima, mulai bekerja 1 Juli"
            },
            {
                id: 4,
                position: "Data Analyst",
                company: "Big Data Analytics",
                date: "20 Mei 2023",
                status: "rejected",
                logo: "https://logo.clearbit.com/bigdataanalytics.co.id",
                notes: "Tidak memenuhi kualifikasi teknis"
            },
            {
                id: 5,
                position: "Product Manager",
                company: "Inovasi Digital Nusantara",
                date: "12 Juni 2023",
                status: "interview",
                logo: "https://logo.clearbit.com/inovasidigital.id",
                notes: "Tahap wawancara kedua minggu depan"
            },
            {
                id: 6,
                position: "Mobile Developer (Flutter)",
                company: "App Genius",
                date: "8 Juni 2023",
                status: "test",
                logo: "https://logo.clearbit.com/appgenius.co",
                notes: "Technical test akan dikirim via email"
            },
            {
                id: 7,
                position: "DevOps Engineer",
                company: "Infra Cloud Indonesia",
                date: "3 Juni 2023",
                status: "review",
                logo: "https://logo.clearbit.com/infracloud.id",
                notes: "Lamaran sedang diproses oleh HRD"
            },
            {
                id: 8,
                position: "Digital Marketing Specialist",
                company: "Growth Marketing Agency",
                date: "28 Mei 2023",
                status: "interview",
                logo: "https://logo.clearbit.com/growthmarketing.com",
                notes: "Wawancara via Zoom hari Jumat"
            },
            {
                id: 9,
                position: "Fullstack Developer",
                company: "CodeCraft Studio",
                date: "25 Mei 2023",
                status: "accepted",
                logo: "https://logo.clearbit.com/codecraftstudio.com",
                notes: "Diterima dengan masa percobaan 3 bulan"
            },
            {
                id: 10,
                position: "System Analyst",
                company: "Enterprise Solutions",
                date: "18 Mei 2023",
                status: "rejected",
                logo: "https://logo.clearbit.com/enterprisesolutions.co.id",
                notes: "Posisi sudah terisi oleh kandidat internal"
            },
            {
                id: 11,
                position: "QA Engineer",
                company: "Software Quality Labs",
                date: "15 Mei 2023",
                status: "pending",
                logo: "https://logo.clearbit.com/softwarequalitylabs.com",
                notes: "Menunggu jadwal technical interview"
            },
            {
                id: 12,
                position: "Data Scientist",
                company: "AI Research Center",
                date: "10 Mei 2023",
                status: "test",
                logo: "https://logo.clearbit.com/airesearchcenter.org",
                notes: "Menyelesaikan coding challenge"
            }
        ];

        // Render application details
        function renderApplicationDetail(app) {
            const detailContainer = document.getElementById('application-detail');
            detailContainer.innerHTML = `
                <div class="flex items-start mb-4">
                    <img src="${app.logo || 'https://via.placeholder.com/40'}" alt="${app.company}" class="w-10 h-10 rounded-full mr-3 object-cover">
                    <div>
                        <h3 class="font-semibold text-lg text-gray-800">${app.position}</h3>
                        <p class="text-gray-600">${app.company}</p>
                        <p class="text-sm text-gray-500">Dikirim: ${app.date}</p>
                        <p class="text-sm text-gray-500">Status: ${app.status}</p>
                    </div>
                </div>
                <div class="bg-gray-50 border border-gray-100 rounded px-3 py-2 text-sm text-gray-700">
                    <i class="far fa-comment-dots mr-2"></i>${app.notes}
                </div>
            `;
        }

        // Find application by ID and render details
        const app = applications.find(a => a.id == appId);
        if (app) {
            renderApplicationDetail(app);
        } else {
            document.getElementById('application-detail').innerHTML = '<p class="text-red-500">Lamaran tidak ditemukan.</p>';
        }

        // Back button functionality
        document.getElementById('back-btn').addEventListener('click', () => {
            window.history.back();
        });

        // Handle form submission
        document.getElementById('apply-form').addEventListener('submit', (event) => {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            const resumes = document.querySelectorAll('input[type="file"][name="documents"]');
            const uploadedFiles = [];

            resumes.forEach((resume) => {
                if (resume.files.length > 0) {
                    uploadedFiles.push(resume.files[0].name);
                }
            });

            if (uploadedFiles.length > 0) {
                // Here you can handle the form submission, e.g., send data to a server
                alert(`Lamaran Anda telah dikirim!\nNama: ${name}\nEmail: ${email}\nPesan: ${message}\nDokumen: ${uploadedFiles.join(', ')}`);
            } else {
                alert('Silakan unggah dokumen sebelum mengirim lamaran.');
            }
            document.getElementById('apply-form').reset(); // Reset the form
        });
    </script>
</body>
</html>
